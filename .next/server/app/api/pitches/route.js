"use strict";(()=>{var e={};e.id=593,e.ids=[593],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},20687:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>v,staticGenerationAsyncStorage:()=>h});var o={};t.r(o),t.d(o,{GET:()=>c,POST:()=>l});var n=t(49303),a=t(88716),s=t(60670),i=t(87070),p=t(2021),u=t(8637);async function c(e){try{await (0,p.Z)();let e=await u.Z.find({available:!0}).sort({size:1});return i.NextResponse.json({pitches:e},{status:200})}catch(e){return console.error("Get pitches error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function l(e){try{await (0,p.Z)();let r=await e.json(),t=await u.Z.create(r);return i.NextResponse.json({pitch:t},{status:201})}catch(e){return console.error("Create pitch error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/pitches/route",pathname:"/api/pitches",filename:"route",bundlePath:"app/api/pitches/route"},resolvedPagePath:"/home/enock/Soka-Zone/app/api/pitches/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:v}=d,g="/api/pitches/route";function f(){return(0,s.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:h})}},2021:(e,r,t)=>{t.d(r,{Z:()=>i});var o=t(11185),n=t.n(o);let a=process.env.MONGODB_URI;if(!a)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let s=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=s);let i=async function(){if(s.conn)return s.conn;s.promise||(s.promise=n().connect(a,{bufferCommands:!1}).then(e=>e));try{s.conn=await s.promise}catch(e){throw s.promise=null,e}return s.conn}},8637:(e,r,t)=>{t.d(r,{Z:()=>s});var o=t(11185),n=t.n(o);let a=new o.Schema({name:{type:String,required:!0,trim:!0},size:{type:String,enum:["5-a-side","7-a-side"],required:!0},description:{type:String,required:!0},basePrice:{type:Number,required:!0},peakHourPrice:{type:Number,required:!0},available:{type:Boolean,default:!0},features:{type:[String],default:[]}},{timestamps:!0}),s=n().models.Pitch||n().model("Pitch",a)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[276,972],()=>t(20687));module.exports=o})();