(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[311],{6922:function(e,t,s){Promise.resolve().then(s.bind(s,5567))},5567:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var n=s(7437),r=s(2265),a=s(9376),i=s(7648);function l(){var e;let t=(0,a.useSearchParams)(),s=t.get("bookingId"),l=t.get("transaction_id")||t.get("trxref"),[o,c]=(0,r.useState)("loading"),[d,x]=(0,r.useState)(null),[m,u]=(0,r.useState)("");return((0,r.useEffect)(()=>{if(!s){c("failed"),u("No booking ID provided");return}let e=async()=>{try{let t=l?"/api/payments/verify?bookingId=".concat(s,"&transactionId=").concat(l):"/api/payments/verify?bookingId=".concat(s),n=await fetch(t),r=await n.json();"completed"===r.status||r.verified?(c("success"),x(r.booking)):"pending"===r.status?(c("pending"),setTimeout(e,3e3)):(c("failed"),u(r.error||"Payment verification failed"))}catch(e){c("failed"),u("Failed to verify payment")}};e()},[s,l]),"loading"===o)?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"w-16 h-16 border-4 border-green-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Verifying Payment..."}),(0,n.jsx)("p",{className:"text-gray-600 mt-2",children:"Please wait while we confirm your payment"})]})}):"pending"===o?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center max-w-md mx-auto px-4",children:[(0,n.jsx)("div",{className:"w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,n.jsx)("svg",{className:"w-10 h-10 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Payment Pending"}),(0,n.jsx)("p",{className:"text-gray-600 mb-6",children:"We're waiting for your payment confirmation. If you're using MoMo, please complete the payment on your phone."}),(0,n.jsx)("div",{className:"w-8 h-8 border-4 border-yellow-600 border-t-transparent rounded-full animate-spin mx-auto"})]})}):"failed"===o?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center max-w-md mx-auto px-4",children:[(0,n.jsx)("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,n.jsx)("svg",{className:"w-10 h-10 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Payment Failed"}),(0,n.jsx)("p",{className:"text-gray-600 mb-6",children:m||"Something went wrong with your payment."}),(0,n.jsx)(i.default,{href:"/book",className:"inline-block bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-xl transition-colors",children:"Try Again"})]})}):(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,n.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-8 text-center",children:[(0,n.jsx)("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-8",children:(0,n.jsx)("svg",{className:"w-12 h-12 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,n.jsx)("h1",{className:"text-4xl font-black text-gray-900 mb-4",children:"Booking Confirmed!"}),(0,n.jsx)("p",{className:"text-xl text-gray-600 mb-10",children:"Your pitch is locked in. We've sent the confirmation details to your email."}),d&&(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-10",children:[(0,n.jsxs)("div",{className:"bg-green-600 rounded-2xl p-6 text-white",children:[(0,n.jsx)("div",{className:"text-green-100 text-sm font-bold uppercase tracking-widest mb-2",children:"Confirmation Code"}),(0,n.jsx)("div",{className:"text-4xl font-black tracking-tighter",children:d.confirmationCode}),(0,n.jsx)("div",{className:"text-green-100 text-sm mt-4",children:"Show this code at reception"})]}),(0,n.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-6 text-left",children:[(0,n.jsx)("h3",{className:"font-bold text-gray-900 mb-4",children:"Booking Details"}),(0,n.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Date:"}),(0,n.jsx)("span",{className:"font-bold",children:new Date(d.date).toLocaleDateString()})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Time:"}),(0,n.jsxs)("span",{className:"font-bold",children:[d.startTime," - ",d.endTime]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Total:"}),(0,n.jsxs)("span",{className:"font-bold text-green-600",children:[null===(e=d.totalPrice)||void 0===e?void 0:e.toLocaleString()," RWF"]})]})]})]})]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,n.jsx)(i.default,{href:"/",className:"bg-gray-900 hover:bg-black text-white font-bold py-4 px-10 rounded-xl transition-colors",children:"Back to Home"}),(0,n.jsx)("button",{onClick:()=>window.print(),className:"bg-white border-2 border-gray-200 hover:border-gray-400 text-gray-700 font-bold py-4 px-10 rounded-xl transition-colors",children:"Print Receipt"})]})]})})})}function o(){return(0,n.jsx)(r.Suspense,{fallback:(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsx)("div",{className:"w-16 h-16 border-4 border-green-600 border-t-transparent rounded-full animate-spin"})}),children:(0,n.jsx)(l,{})})}},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var n=s(2972),r=s.n(n)},9376:function(e,t,s){"use strict";var n=s(5475);s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=6922)}),_N_E=e.O()}]);